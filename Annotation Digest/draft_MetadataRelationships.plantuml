@startuml Metadata
' EMBER x BIDS x DANDI Integration
title EMBER x BIDS x DANDI Metadata Relationships

' Layout and appearance settings
page 2x2
skinparam pageMargin 10
skinparam pageBorderColor black
skinparam pageBorderColor gray

' Core Classes
class EMBERProject {
  +Type:               String
  +Link:               String
  +PoP years (max):    String
  +Award #:            String
  +Title:              String
  +PI Name:            String
  +PI Email:           String
  +Human/Animal:       String
  +Species (Regular):  String
  +Species (Scientific Name): String
  +Sensors:            String
  +DataModalities:     String
  +Approaches:         String
  +DataGeneration Sort: String
  +Program Official:   String
  +Organization:       String
--
EMBERMetadata:
  +Identifier:        String
  +Metadata_Fields:   List<String>
}

class EMBERPHI_PII {
  +Identifier:        String
  +PII_Fields:        List<String>
  +Privacy_Level:     String
}

class DANDI {
  +Format:      NWB, BIDS or DANDIsetMetadata
  ---
  +Identifier:           String
  +DOI:                  String
  +Funding:              String
  +Keywords:             List<String>
  +DatasetType:          String
  +Contributor:          String
}

' DANDI-Specific Metadata from here: https://www.dandiarchive.org/handbook/136_metadata/
class DANDIsetMetadata {
  +General:               String
  +Contributors:          List<String>
  +SubjectMatter:         String
  +EthicsApprovals:       NWB
  +Links:                 String
}

class DABI {
  +Format:  NWB, BIDS, or Subject
  ---
   +DatasetType:          String
  +Authors:              List<String>
  +Funding:              String
  +Species:              String
  +Devices:              String
  +Tasks:                List<String>
  +ModalitySpecific:     JSON/TSV
  +Participant Info:     participants.tsv
  +Dataset Description:  dataset_description.json
}

 class Subject {
  Subject:              
    +Imaging:             String
    +Electrophysiology:   String
    +Behavioral:          String
    +Stimuli:             String
    +Wearable Devices:    String
    +Participants:        String
    +Session Info:        String
    +Raw Data Storage:    Directory Tree
    +Derived Data:        Processed Files
    }

class BIDS {
  +DatasetType:          String
  +Authors:              List<String>
  +Funding:              String
  +Species:              String
  +Devices:              String
  +Tasks:                List<String>
  +ModalitySpecific:     JSON/TSV
  +Participant Info:     participants.tsv
  +Dataset Description:  dataset_description.json
}

' BIDS Integration
class BIDSParticipants {
  +Participant_ID:    String
  +Age:               Integer
  +Sex:               String
  +Human/Animal:      String
}
class BIDSSession {
  +Session_ID:        String
  +Tasks:             List<String>
  +Modality_Files:    String
}
class BIDSModality {
  +Modality:          String
  +Filename_Template: String
  +Metadata:          JSON/TSV
}

' https://nwb-schema.readthedocs.io/en/stable/
class NWB {
  +Group:
  +Dataset:
  +Attribute:
  +Link:
}


EMBERProject --> EMBERPHI_PII : Contains PHI/PII data
EMBERProject --> DANDI : Shares metadata
EMBERProject --> DABI : Shares metadata

DANDI --> BIDS : Extends with additional metadata
DANDI --> DANDIsetMetadata : Contains metadata standards
DANDI --> NWB : Integrates with NWB

DABI --> BIDS : Integrates with BIDS
DABI --> NWB : Integrates with NWB
DABI --> Subject : Integrates with NWB

BIDS --> BIDSParticipants : Includes participant data
BIDS --> BIDSSession : Organizes by session data
BIDS --> BIDSModality : Links raw data to metadata



