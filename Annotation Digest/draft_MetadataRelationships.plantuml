@startuml Metadata
' EMBER x BIDS x DANDI Integration
title EMBER x BIDS x DANDI Metadata Relationships

' Layout and appearance settings
page 2x2
skinparam pageMargin 10
skinparam pageBorderColor black
skinparam pageBorderColor gray

' Core Classes
class EMBERProject {
  +Type:               String
  +Link:               String
  +PoP years (max):    String
  +Award #:            String
  +Title:              String
  +PI Name:            String
  +PI Email:           String
  +Human/Animal:       String
  +Species (Regular):  String
  +Species (Scientific Name): String
  +Sensors:            String
  +DataModalities:     String
  +Approaches:         String
  +DataGeneration Sort: String
  +Program Official:   String
  +Organization:       String
}

class BIDS {
  +DatasetType:          String
  +Authors:              List<String>
  +Funding:              String
  +Species:              String
  +Devices:              String
  +Tasks:                List<String>
  +ModalitySpecific:     JSON/TSV
  +Participant Info:     participants.tsv
  +Dataset Description:  dataset_description.json
}

class EMBERPHI_PII {
  +Identifier:        String
  +PII_Fields:        List<String>
  +Privacy_Level:     String
}

class EMBERMetadata {
  +Identifier:        String
  +Metadata_Fields:   List<String>
}

class DANDI {
  +Identifier:           String
  +DOI:                  String
  +Funding:              String
  +Keywords:             List<String>
  +DatasetType:          String
  +Contributor:          String
  +Metadata Format:      NWB/PsychDS
}

class DABI {
  +Identifier:           String
  +DOI:                  String
  +Funding:              String
  +Keywords:             List<String>
  +DatasetType:          String
  +Contributor:          String
  +Metadata Format:      NWB/PsychDS
}

' BIDS Integration
class BIDSParticipants {
  +Participant_ID:    String
  +Age:               Integer
  +Sex:               String
  +Human/Animal:      String
}
class BIDSSession {
  +Session_ID:        String
  +Tasks:             List<String>
  +Modality_Files:    String
}
class BIDSModality {
  +Modality:          String
  +Filename_Template: String
  +Metadata:          JSON/TSV
}

BIDS --> BIDSParticipants : Includes
BIDS --> BIDSSession : Organizes by sessions
BIDS --> BIDSModality : Links raw data to metadata

' DANDI-Specific Metadata
class DANDIMetadata {
  +Identifier:        String
  +DOI:               String
  +RelatedProjects:   List<String>
  +File_Format:       NWB
  +Keywords:          List<String>
}

EMBERProject --> EMBERPHI_PII : Contains PHI/PII data
EMBERProject --> DANDI : Shares metadata
EMBERProject --> DABI : Shares metadata
EMBERPHI_PII <--> EMBERMetadata : Associated with metadata

DANDI --> BIDS : Extends with additional metadata
DANDI --> EMBERMetadata : Associated with metadata
DANDI --> DANDIMetadata : Contains metadata standards

DABI --> BIDS : Integrates with BIDS

BIDS --> BIDSParticipants : Includes participant data
BIDS --> BIDSSession : Organizes by session data
BIDS --> BIDSModality : Links raw data to metadata

