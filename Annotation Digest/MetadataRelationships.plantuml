@startuml Metadata
' EMBER x BIDS x DANDI x DABI Integration
title EMBER x BIDS x DANDI x DABI Metadata Relationships

' Layout and appearance settings
page 2x2
skinparam pageMargin 10
skinparam pageBorderColor black
skinparam pageBorderColor gray

' Core Classes
class EMBERProject {
  +Type:               String
  +Link:               String
  +PoP_years_max:      String
  +Award:              String
  +Title:              String
  +PI_Name:            String
  +PI_Email:           String
  +Human_Animal:       String
  +Species_Regular:    String
  +Species_Scientific: String
  +Sensors:            String
  +DataModalities:     String
  +Approaches:         String
  +DataGenerationSort: String
  +Program_Official:   String
  +Organization:       String
  --
EMBER Metadata:
  +Identifier:        String
  +Metadata_Fields:   List<String>
}

class EMBERPHI_PII {
  +Identifier:        String
  +PII_Fields:        List<String>
  +Privacy_Level:     String
}

class DANDI {
  +Standards:         List<String> ' Possible values: BIDS, NWB
  +Metadata:          String ' Possible values: DANDIsetMetadata
}

class DANDIsetMetadata {
  +General:           String
  +Contributors:      List<String>
  +SubjectMatter:     String
  +EthicsApprovals:   String
  +Links:             List<String>
}

class DABI {
  +Standards:         List<String> ' Possible values: BIDS, NWB
}

class Subject {
  +Imaging:           List<String>
  +Electrophysiology: List<String>
  +Behavioral:        List<String>
  +Stimuli:           List<String>
  +WearableDevices:   String
  +Participants:      String
  +SessionInfo:       String
  +RawData:           String
  +DerivedData:       String
}

class BIDS {
  +DatasetType:       String
  +BIDSVersion:       String
  +Name:              String
  +License:           String
  +Authors:           List<String>
  +Funding:           List<String>
  +EthicsApprovals:   List<String>
  +SupportedModalities: List<String>
  +ParticipantsFile:  String
  +ScansFile:         String
  +SessionsFile:      String
  +PhenotypicData:    String
  +DatasetDescription: String
  +Readme:            String
  +Citation:          String
  +Code:              String
}

class BIDSParticipants {
  +Participant_ID:    String
  +Age:               String
  +Sex:               String
  +Species:           String
  +Handedness:        String
  +Strain:            String
  +Group:             String
}

class BIDSSession {
  +Session_ID:        String
  +Tasks:             List<String>
  +Scans:             List<String>
  +Acquisition_Time:  String
  +Pathology:         String
  +Session_Columns:   List<String>
}

class BIDSModality {
  +Modality:          String
  +Filename_Template: String
  +Metadata:          String
}

class NWB {
  +Group:             List<String>
  +Dataset:           List<String>
  +Attribute:         List<String>
  +Link:              List<String>
}

class Group {
  +Acquisition:       String
  +Intervals:         String
  +Stimulus:          String
  +Processing:        String
  +Analysis:          String
}

class Dataset {
  +Description:       String
  +Organization:      String
  +Subsections:       List<String>
  +Name:              String
}

class Attribute {
  +Neurodata_Type:    String
  +Namespace:         String
  +Object_ID:         String
}

class Link {
  +SoftLinks:         List<String>
  +HardLinks:         String
}

' Relationships
EMBERProject --> EMBERPHI_PII : Contains PHI/PII data
EMBERProject --> DANDI : Shares metadata
EMBERProject --> DABI : Shares metadata

DANDI --> BIDS : Extends with additional metadata
DANDI --> DANDIsetMetadata : Contains metadata standards
DANDI --> NWB : Integrates with NWB

DABI --> BIDS : Integrates with BIDS
DABI --> NWB : Integrates with NWB
DABI --> Subject : If not in BIDS or NWB, folders should be structured by subject format

BIDS --> BIDSParticipants : Includes participant data
BIDS --> BIDSSession : Organizes by session data
BIDS --> BIDSModality : Links raw data to metadata

NWB --> Group : Organized into main groups
NWB --> Dataset : Describes datasets and types
NWB --> Attribute : Includes required attributes
NWB --> Link : Describes linking mechanisms
@enduml
